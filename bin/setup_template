#!/usr/bin/env ruby

puts "ðŸš€ Setting up your Autobiography Template..."
puts

# Check Ruby version
ruby_version = RUBY_VERSION
if ruby_version < "3.0"
  puts "âŒ Ruby #{ruby_version} detected. Please upgrade to Ruby 3.0 or higher."
  exit 1
else
  puts "âœ… Ruby #{ruby_version} - Good!"
end

# Check Rails
begin
  require 'rails/version'
  rails_version = Rails.version
  puts "âœ… Rails #{rails_version} - Good!"
rescue LoadError
  puts "âŒ Rails not found. Please install Rails 7.0 or higher."
  exit 1
end

puts
puts "ðŸ“¦ Installing dependencies..."

# Install gems
system("bundle install") or exit 1

# Install JavaScript dependencies
system("yarn install") or exit 1

puts
puts "ðŸ—„ï¸ Setting up database..."

# Setup database
system("rails db:create") or exit 1
system("rails db:migrate") or exit 1
system("rails db:seed") or exit 1

puts
puts "ðŸŽ¨ Template setup complete!"
puts
puts "Next steps:"
puts "1. Run 'rails server' to start the application"
puts "2. Visit http://localhost:3000 in your browser"
puts "3. Check the docs/ folder for customization guides"
puts "4. Replace placeholder text with your own content"
puts
puts "ðŸ“– Read CUSTOMIZATION.md for styling instructions"
puts "ðŸš€ Happy writing!"
